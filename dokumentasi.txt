Manggo JS

- Pengertian 
aplikasi rantai pasok buah mangga yang menggunakan teknologi blockchain


- atribut 
1. autentikasi
Id, userName, password, email, namaLengkap, noTelp, tglLahir, nik, role, alamat  

2. blockchain


- channel
1. channel pertama : channel1
alur proses = penangkar -> petani -> pengumpul -> pedagang besar -> konsumen
2. channel kedua : channel2
alur proses : penangkar -> petani -> pengumpul -> pedagang kecil -> konsumen

# PENANGKAR

1. fungsi mendaftarkan aset benih
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "RegistrasiBenih",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "{\"VarietasBenih\":\"arumanis\",\"UmurBenih\":\"3 hari\",\"kuantitasBenihKg\": 4.2}"
    ]
}

2. menambah kuantitas benih
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "AddKuantitasBenihByID",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "10", 
        "benihID"
    ]
}

3. fungsi membuat transaksi penangkar ke petani
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "CreateTrxManggaByPenangkar",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "{\"NamaPengirim\":\"koharPenangkar\",\"NamaPenerima\":\"beniPetani\",\"kuantitasBenihKg\": 4.2,\"HargaBenihKg\":10000,\"CaraPembayaran\":\"tunai\"}", 
        "benihID"
    ]
}

4. daftar benih asset yang telah dibuat
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.penangkar.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPengirim\":\"koharPenangkar\", \"isAsset\":true}}"]
peer : peer0.penangkar.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPengirim\":\"koharPenangkar\", \"isAsset\":true}}"]

5. daftar transaksi yg dikirim
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.penangkar.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPengirim\":\"koharPenangkar\", \"isConfirmed\":false}}"]
peer : peer0.penangkar.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPengirim\":\"koharPenangkar\", \"isConfirmed\":false}}"]


# PETANI

1. daftar transaksi yg masuk dan belum di accept
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.penangkar.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPenerima\":\"beniPetani\", \"isConfirmed\":false}}"]
peer : peer0.penangkar.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPenerima\":\"beniPetani\", \"isConfirmed\":false}}"]

2. fungsi untuk tanam benih
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "TanamBenih",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "{\"Pupuk\":\"kompos\",\"LokasiLahan\":\"cikabayan\"}", 
        "id dari confirm TxID1"
    ]
}

3. fungsi untuk panen mangga
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "PanenMangga",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "{\"Ukuran\":\"lonjong\",\"Pestisida\":\"abcd\",\"KadarAir\":\"sedang\",\"Perlakuan\":\"baik\",\"Produktivitas\":\"subur\",\"KuantitasManggaKg\": 100}",
        "id manggaID"
    ]
}

4. fungsi transaksi petani dan pengumpul
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "CreateTrxManggaByPetani",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "{\"NamaPengirim\":\"beniPetani\",\"NamaPenerima\":\"adulPengumpul\",\"KuantitasManggaKg\": 100,\"HargaManggaKg\":30000,\"CaraPembayaran\":\"tunai\"}", 
        "id manggaID"
    ]
}

5. daftar manggaID yang sudah dibuat
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.petani.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPengirim\":\"beniPetani\", \"isAsset\":true}}"]
peer : peer0.petani.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPengirim\":\"beniPetani\", \"isAsset\":true}}"]

6. daftar transaksi yg dikirim ke pengumpul
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.petani.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPengirim\":\"beniPetani\", \"isConfirmed\":false}}"]
peer : peer0.petani.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPengirim\":\"beniPetani\", \"isConfirmed\":false}}"]

# PENGUMPUL 

1. daftar transaksi yg masuk dari petani dan belum di accept
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.petani.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPenerima\":\"adulPengumpul\", \"isConfirmed\":false}}"]
peer : peer0.petani.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPenerima\":\"adulPengumpul\", \"isConfirmed\":false}}"]

2. fungsi transaksi pengumpul dan pedagang
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "CreateTrxManggaByPengumpul",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "{\"NamaPengirim\":\"adulPengumpul\",\"NamaPenerima\":\"dadangPedagang\",\"KuantitasManggaKg\": 100,\"HargaManggaKg\":40000,\"TeknikSorting\":\"bubble sort\",\"MetodePengemasan\":\"karung beras\",\"Pengangkutan\":\"peti kemas\",\"CaraPembayaran\":\"tunai\"}", 
        "id TxID2"
    ]
}

3. daftar transaksi yg dikirim ke pedagang
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.pengumpul.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPengirim\":\"adulPengumpul\", \"isConfirmed\":false}}"]
peer : peer0.pengumpul.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPengirim\":\"adulPengumpul\", \"isConfirmed\":false}}"]

# PEDAGANG 

1. daftar transaksi yg masuk dari pengumpul dan belum di accept
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.pengumpul.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPenerima\":\"adulPengumpul\", \"isConfirmed\":false}}"]
peer : peer0.pengumpul.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPenerima\":\"adulPengumpul\", \"isConfirmed\":false}}"]

2. fungsi transaksi pedagang dan konsumsi
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "CreateTrxManggaByPedagang",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "{\"NamaPengirim\":\"dadangPedagang\",\"NamaPenerima\":\"omenKonsumen\",\"KuantitasManggaKg\": 100,\"HargaManggaKg\":50000,\"CaraPembayaran\":\"tunai\"}", 
        "id TxID3"
    ]
}

3. daftar transaksi yg dikirim ke konsumen
method : GET
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc/?peer=peer0.pengumpul.example.com&fcn=GetManggaForQuery&args=["{\"selector\":{\"NamaPengirim\":\"dadangPedagang\", \"isConfirmed\":false}}"]
peer : peer0.pedagang.example.com
fcn  : GetManggaForQuery
argn : ["{\"selector\":{\"NamaPengirim\":\"dadangPedagang\", \"isConfirmed\":false}}"]


# bonus

1. mendaftarkan akun
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "CreateUser",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "{\"NoHP\":\"081562621717\",\"Email\":\"ggg@gmail.com\",\"NamaLengkap\": \"dadangPedagang\",\"Username\":\"dadang123\",\"Password\":\"password\",\"TanggalLahir\":\"1 januari 1999\",\"NIK\":1111222233334444,\"Role\":2,\"Alamat\":\"bogor\"}", 
    ]
}

2. konfirmasi transaksi (petani, pengumpul, pedagang)
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "ConfirmTrxByID",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "ID TxID bersangkutan"
    ]
}

3. tolak transaksi (petani, pengumpul, pedagang)
method : POST
link : http://localhost:4000/sc/channels/channel1/chaincodes/manggach1_cc
body : {
    "fcn": "RejectTrxByID",
    "peers": [
        "peer0.penangkar.example.com",
        "peer0.petani.example.com",
        "peer0.pengumpul.example.com",
        "peer0.pedagang.example.com"
    ],
    "chaincodeName": "manggach1_cc",
    "channelName": "channel1",
    "args": [
        "ID TxID yg bersangkutan",
        "ID TxID yg sebelumnya",
        "10",
        "kuantitas tidak sesuai"
    ]
}